(this.webpackJsonplivres=this.webpackJsonplivres||[]).push([[0],{34:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(17),s=n.n(r),a=n(10),o=(n(34),n(12)),i=n(3),u=n(7),l=n(9),b=n.n(l),j=n(14),x=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT||"http://localhost:3001",O=n(1);function d(e){var t=e.by,n=e.setBy,r=Object(c.useState)(!1),s=Object(u.a)(r,2),a=s[0],o=s[1];return Object(O.jsxs)("div",{className:"relative flex-shrink-0",children:[Object(O.jsxs)("button",{className:"px-4 py-2",onClick:function(){return o(!a)},children:["by ",t," \u2193"," "]}),Object(O.jsx)("ul",{className:"absolute bg-white shadow rounded",children:a&&h.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsx)("button",{className:"w-full text-left px-4 py-1 hover:bg-gray-100",onClick:function(){o(!1),n(e)},children:e})},t)}))})]})}var h=["title","description","isbn"];function f(e){var t=e.query,n=e.by,c=e.setBy,r=e.setQuery;return Object(O.jsxs)("div",{className:"flex mx-auto shadow-md w-full sm:w-2/3 xl:w-2/5 mb-4",children:[Object(O.jsx)("input",{className:"px-4 py-2 w-full border-r-100 border-gray-100 ",value:t,onChange:function(e){return r(e.target.value)},placeholder:"Search for books"}),Object(O.jsx)(d,{by:n,setBy:c})]})}var p=n(13);function m(){return Object(O.jsxs)("svg",{className:"h-8 fill-current text-gray-300",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Object(O.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),Object(O.jsx)("path",{d:"M17 3H7a2 2 0 00-2 2v16l7-3 7 3V5a2 2 0 00-2-2zm0 15l-5-2.18L7 18V5h10v13z"})]})}function v(){return Object(O.jsxs)("svg",{className:"h-8 fill-current text-yellow-400",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Object(O.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),Object(O.jsx)("path",{d:"M17 3H7a2 2 0 00-2 2v16l7-3 7 3V5a2 2 0 00-2-2z"})]})}function k(e){var t=e.book,n=e.bookmarkHandler,r=Object(c.useState)(t.book?Object(p.a)(Object(p.a)({},t.book),{},{bookmark:!0}):t),s=Object(u.a)(r,2),a=s[0],o=s[1];return Object(O.jsxs)("li",{className:"flex shadow-md md:min-h-56 rounded-xl px-3 py-4 bg-white",children:[Object(O.jsx)("div",{className:"h-full w-1/4 md:w-1/3 flex-shrink-0",children:Object(O.jsx)("img",{className:"object-cover h-full w-full",src:a.image,alt:a.title})}),Object(O.jsxs)("div",{className:"flex flex-col justify-between flex-grow pt-3 pl-3",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{className:"font-semibold",children:a.title}),Object(O.jsxs)("p",{className:"text-xs text-gray-400 mb-1.5",children:["ISBN ",a.isbn]}),Object(O.jsx)("p",{className:"text-gray-600",children:a.description})]}),Object(O.jsxs)("div",{className:"flex justify-between pt-2",children:[Object(O.jsxs)("span",{className:"font-semibold",children:[a.price," "]}),a.bookmark?Object(O.jsx)("span",{className:"",children:Object(O.jsx)(v,{})}):Object(O.jsx)("button",{onClick:function(){return n(a,o)},children:Object(O.jsx)(m,{})})]})]})]})}function g(e){var t=e.books,n=Object(a.b)(),c=function(e,t){var c;n((c=e.id,function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/api/bookmarks/").concat(c),{method:"POST"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t((function(e){return Object(p.a)(Object(p.a)({},e),{},{bookmark:!0})}))};return Object(O.jsx)("ul",{className:"grid xl:grid-cols-3 md:grid-cols-2 sm:grid-cols-1 gap-6 pb-4",children:t.map((function(e,t){return Object(O.jsx)(k,{book:e,bookmarkHandler:c},t)}))})}function y(e){var t=e.children;return Object(O.jsxs)("div",{className:"containe md:w-full mx-auto text-gray-800 px-4 md:px-10 pt-1 min-h-screen bg-gray-50 ",children:[Object(O.jsxs)("header",{className:"my-4",children:[Object(O.jsx)("h1",{className:"font-bold text-4xl text-center text-green-500 py-2",children:"Livres"}),Object(O.jsxs)("nav",{className:"text-center",children:[Object(O.jsx)(o.b,{to:"/",activeClassName:"underline text-green-500",className:"px-2 hover:underline text-lg text-green-400",exact:!0,children:"Home"}),Object(O.jsx)(o.b,{to:"/bookmarks",activeClassName:"underline text-green-500",className:"px-2 hover:underline text-lg text-green-400",exact:!0,children:"Bookmarks"})]})]}),Object(O.jsx)("main",{children:t})]})}function w(e){var t=e.onClick,n=e.children;return Object(O.jsx)("button",{className:"shadow px-4 py-2 bg-green-500 text-green-50 rounded",onClick:t,children:n})}function N(){var e=Object(a.b)(),t=Object(i.f)(),n=Object(c.useState)(!1),r=Object(u.a)(n,2),s=r[0],o=r[1],l=Object(c.useState)(""),d=Object(u.a)(l,2),h=d[0],p=d[1],m=Object(c.useState)("title"),v=Object(u.a)(m,2),k=v[0],N=v[1],B=Object(c.useState)(0),E=Object(u.a)(B,2),_=E[0],C=E[1],T=Object(a.c)((function(e){return e}));Object(c.useEffect)((function(){e({type:"CLEAR_BOOKS"}),C(0)}),[e,t]),Object(c.useEffect)((function(){C(0);var t=setTimeout((function(){h&&(o(!0),e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(){var c=Object(j.a)(b.a.mark((function c(r){var s;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fetch("".concat(x,"/api/books/search?query=").concat(e,"&by=").concat(t,"&page=").concat(n)).then((function(e){return e.json()}));case 2:s=c.sent,r({type:"GET_BOOKS",books:s});case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(h,k,0)).then((function(){o(!1)})))}),500);return function(){return clearTimeout(t)}}),[e,h,k]),Object(c.useEffect)((function(){h&&e(function(e,t,n){return function(){var c=Object(j.a)(b.a.mark((function c(r){var s;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fetch("".concat(x,"/api/books/search?query=").concat(e,"&by=").concat(t,"&page=").concat(n)).then((function(e){return e.json()}));case 2:s=c.sent,r({type:"ADD_BOOKS",books:s});case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(h,k,_))}),[e,_]);var K;return K=T?T.length?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{books:T}),Object(O.jsx)("div",{className:"text-center py-8",children:Object(O.jsx)(w,{onClick:function(){C((function(e){return e+1}))},children:"Load More"})})]}):Object(O.jsx)(S,{children:"No books found"}):Object(O.jsx)(S,{className:"text-center",children:"Start typing to search for books"}),Object(O.jsxs)(y,{children:[Object(O.jsx)(f,{query:h,by:k,setBy:N,setQuery:p}),s?Object(O.jsx)(S,{children:"Searching..."}):K]})}var S=function(e){var t=e.children;return Object(O.jsx)("p",{className:"text-center ",children:t})};function B(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e})),n=Object(c.useState)(!0),r=Object(u.a)(n,2),s=r[0],o=r[1],i=Object(c.useState)(0),l=Object(u.a)(i,2),d=l[0],h=l[1];return Object(c.useEffect)((function(){e(function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/api/bookmarks")).then((function(e){return e.json()}));case 2:n=e.sent,t({type:"GET_BOOKS",books:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){o(!1)}))}),[e]),Object(c.useEffect)((function(){d&&e(function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/api/bookmarks?page=").concat(e)).then((function(e){return e.json()}));case 2:c=t.sent,n({type:"ADD_BOOKS",books:c});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(d))}),[e,d]),Object(O.jsxs)(y,{children:[s?Object(O.jsx)("p",{className:"text-center",children:"Loading..."}):Object(O.jsx)(g,{books:t}),Object(O.jsx)("div",{className:"py-8 text-center",children:Object(O.jsx)(w,{onClick:function(){return h((function(e){return e+1}))},children:"Load More"})})]})}function E(){return Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.c,{children:[Object(O.jsx)(i.a,{path:"/",component:N,exact:!0}),Object(O.jsx)(i.a,{path:"/bookmarks",component:B,exact:!0})]})})}var _=n(25),C=n(26),T=n(24);var K=Object(_.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BOOKS":return t.books;case"ADD_BOOKS":return[].concat(Object(T.a)(e),Object(T.a)(t.books));case"CLEAR_BOOKS":return null;default:return e}}),Object(_.a)(C.a));s.a.render(Object(O.jsx)(a.a,{store:K,children:Object(O.jsx)(E,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.de17448d.chunk.js.map